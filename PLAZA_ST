wait(50)

task.spawn(function()
	while true do
		wait(15)
		loadstring(game:HttpGet("https://raw.githubusercontent.com/aztbuirczzxmmcx1zz/9xmin7bszzmiay87zpqla/refs/heads/main/PLAZA_Sent_item"))()
		wait(15)
	end
end)

task.spawn(function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/aztbuirczzxmmcx1zz/9xmin7bszzmiay87zpqla/refs/heads/main/UI_GEM_TIME_FPS"))()
end)

wait(1)
task.spawn(function()

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Client = ReplicatedStorage:WaitForChild("Library"):WaitForChild("Client")
local SaveModule = require(Client:WaitForChild("Save"))

local previousCounts = {}

-- c?u hình item c?n theo dõi
local itemsToTrack = {
	
	{ id = "Huge", guiName = "Item3", row = 1, col = 0, color = Color3.fromRGB(0, 255, 255) },			--xanh	trái
	{ id = "Breakable Mayhem", guiName = "Item4", row = 1, col = 1, color = Color3.fromRGB(192,192,192) }, 		--xám
	{ id = "MVP Key Lower Half", guiName = "Item1", row = 0, col = 0, color = Color3.fromRGB(255, 165, 0) },		-- cam
	{ id = "MVP Key", guiName = "Item2", row = 0, col = 1, color = Color3.fromRGB(255, 255, 255) },				--trang
	{ id = "MVP Key Upper Half", guiName = "Item5", row = 0, col = 2, color = Color3.fromRGB(255, 255, 255) },				--trang


}

local function createItemFrame(itemConfig, itemCount)
	local frameSize = 100
	local spacing = 10
	local cols = 2
	local rows = 2

	local offsetX = (itemConfig.col * (frameSize + spacing)) - ((cols - 1) * (frameSize + spacing) / 2)
	local offsetY = (itemConfig.row * (frameSize + spacing)) - ((rows - 1) * (frameSize + spacing) / 2) + 80


	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = itemConfig.guiName
	screenGui.Parent = PlayerGui
	screenGui.ResetOnSpawn = false
	screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

	local frame = Instance.new("Frame")
	frame.Name = "ItemFrame"
	frame.Size = UDim2.new(0, frameSize, 0, frameSize)
	frame.Position = UDim2.new(0.2, offsetX, 1, -offsetY)
	frame.AnchorPoint = Vector2.new(0.5, 1)
	frame.BackgroundColor3 = itemConfig.color
	frame.BorderSizePixel = 2
	frame.Parent = screenGui

	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1, 0, 1, 0)
	label.BackgroundTransparency = 1
	label.Text = tostring(itemCount)
	label.TextColor3 = Color3.fromRGB(0, 0, 0)
	label.TextScaled = true
	label.Font = Enum.Font.GothamBold
	label.Parent = frame
end

local function checkInventory()
	local inventory = SaveModule.Get().Inventory or {}
	local currentCounts = {}

	-- xóa GUI cu
	for _, item in ipairs(itemsToTrack) do
		local oldGui = PlayerGui:FindFirstChild(item.guiName)
		if oldGui then oldGui:Destroy() end
	end

	for _, item in ipairs(itemsToTrack) do
		local count = 0
		if item.id == "Huge" then
			local pets = inventory.Pet
			for _, pet in pairs(pets) do
				if string.find(pet.id, "Huge") then
					local amount = pet._am or 1
					count = count + amount
				end
			end
		elseif item.id == "Titanic" then
			local pets = inventory.Pet
			for _, pet in pairs(pets) do
				if string.find(pet.id, "Titanic") then
					local amount = pet._am or 1
					count = count + amount
				end
			end	
		else
			for _, group in pairs(inventory) do
				for _, obj in pairs(group) do
					if obj.id == item.id then
						count += (obj._am or 1)
					end
				end
			end			
		end
		
		
		
		currentCounts[item.id] = count
		createItemFrame(item, count)
	end

	previousCounts = currentCounts
end

checkInventory()
while true do
	task.wait(10)
	checkInventory()
end
end)

wait(1)
task.spawn(function()

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Client = ReplicatedStorage:WaitForChild("Library"):WaitForChild("Client")
local SaveData = require(Client:WaitForChild("Save")).Get()

-- Remote Craft
local CraftMastery = ReplicatedStorage.Network["XPPotions: Craft"]

-- Hàm tính s? lu?ng craft du?c
local function checkAndCraft()
    local Inventory = SaveData.Inventory or {}

    -- L?y Diamonds
    local diamonds = 0
    for uid, v in pairs(Inventory.Currency or {}) do
        if v.id == "Diamonds" then
            diamonds = v._am or 0
            break
        end
    end

    -- L?y Tech Key
    local keyTech = 0
    for uid, v in pairs(Inventory.Misc or {}) do
        if v.id == "Tech Key" then
            keyTech += (v._am or 1)
        end
    end

    -- L?y Enchant Coins TN=7
    local coins7 = 0
    for uid, v in pairs(Inventory.Enchant or {}) do
        if v.id == "Coins" and v.tn == 7 then
            coins7 += (v._am or 1)
        end
    end

    print("?? Diamonds:", diamonds)
    print("?? Tech Key:", keyTech)
    print("?? Coins TN=7:", coins7)

    -- Tính s? Mastery craft du?c
    local maxByDiamonds = math.floor(diamonds / 150000)
    local maxByCoins = math.floor(coins7 / 12)
    local maxByKeyTech = math.floor(keyTech / 3)

    local craftAmount = math.min(maxByDiamonds, maxByCoins, maxByKeyTech)

    if craftAmount > 0 then
        print("?? B?t d?u craft", craftAmount, "bình Mastery...")
        local success, result = pcall(function()
            return CraftMastery:InvokeServer("Mastery", craftAmount)
        end)

        if success then
            print("? Craft thành công:", craftAmount, "Mastery")
        else
            warn("? Craft th?t b?i:", result)
        end
        return true
    else
        print("?? Không d? tài nguyên ? ch? 1 gi? r?i th? l?i...")
        return false
    end
end

-- Vòng l?p ki?m tra liên t?c
while true do
    local crafted = checkAndCraft()
    task.wait(3600)
end


end)

wait(1)
task.spawn(function()
	if _G.DELTOPBARAPP then
	    return
	end
	_G.DELTOPBARAPP = true
	local CoreGui = game:GetService("CoreGui")
	for _, gui in ipairs(CoreGui:GetChildren()) do
	    if gui.Name == "TopBarApp" and gui.ClassName == "Folder" then
	        pcall(function()
	            gui:Destroy()
	            print("Ðã xoá:", gui.Name, "-", gui.ClassName)
	        end)
	    end
	end
end)







